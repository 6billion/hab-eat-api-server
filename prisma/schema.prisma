// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id        Int      @unique @default(autoincrement())
  nickname  String
  hight     Int
  weight    Int
  goalKcal  Int
  createdAt DateTime @default(now())

  token   Tokens?    @relation("userToToken")
  account Accounts[] @relation("userToAccount")
}

model Accounts {
  id        String
  type      AccountsType
  userId    Int          @unique
  createdAt DateTime     @default(now())

  user Users @relation("userToAccount", fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)

  @@id([id, type])
}

model Tokens {
  userId    Int      @unique
  token     String   @unique
  updatedAt DateTime @updatedAt

  user Users @relation("userToToken", fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

enum AccountsType {
  Google
  Facebook
  Local
}
model DietStats {
  userId       Int      
  date         DateTime @db.Date
  amount       Float
  kcal         Float
  carbohydrate Float
  sugar        Float
  fat          Float
  protein      Float
  calcium      Float
  phosphorus   Float
  natrium      Float
  kalium       Float
  magnesium    Float
  iron         Float
  zinc         Float
  cholesterol  Float
  transfat     Float
  updatedAt    DateTime @updatedAt
  @@id([userId, date, updatedAt])
}

model Diets {
  id           Int @id @default(autoincrement())
  userId       Int
  date         DateTime @db.Date
  createdAt    DateTime 
  amount       Float
  kcal         Float
  carbohydrate Float
  sugar        Float
  fat          Float
  protein      Float
  calcium      Float
  phosphorus   Float
  natrium      Float
  kalium       Float
  magnesium    Float
  iron         Float
  zinc         Float
  cholesterol  Float
  transfat     Float
  @@index([userId, date, createdAt])
}
model Food {
  name          String   @unique
  amount        Float    
  kcal          Float    
  carbohydrate  Float    
  sugar         Float    
  fat           Float    
  protein       Float    
  calcium       Float    
  phosphorus    Float    
  natrium       Float    
  kalium        Float    
  magnesium     Float    
  iron          Float    
  zinc          Float    
  cholesterol   Float    
  transfat      Float    
} 